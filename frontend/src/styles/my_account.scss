@use '_mixins' as mixins;
@use '_vars' as vars;

.my-account-page {
    position: relative;

    /*
        Make sure any links inside the account area don’t inherit browser defaults
        (purple + underline) if any global reset is missing.
    */
    a {
        color: inherit;
        text-decoration: none;
    }

    &__main {
        position: relative;
        width: 100%;
        max-width: vars.$max-page-width;
        margin: 0 auto;
        padding: clamp(1.25rem, 3vw, 2rem) clamp(1rem, 3vw, 1.5rem);
    }

    .my-account__logout-button {
        position: absolute;
        top: clamp(0.75rem, 2vw, 1.25rem);
        right: clamp(0.75rem, 2vw, 1.25rem);
        z-index: 2;

        display: inline-flex;
        align-items: center;
        justify-content: center;

        padding: 0.55rem 1.1rem;
        border-radius: 999px;

        border: 1px solid rgba(vars.$soft-black, 0.14);
        background:
            linear-gradient(180deg, rgba(#ffffff, 0.90), rgba(#ffffff, 0.70));
        color: rgba(vars.$soft-black, 0.88);

        font-size: 0.82rem;
        font-weight: 850;
        letter-spacing: 0.12em;
        text-transform: uppercase;

        cursor: pointer;

        box-shadow:
            0 14px 32px rgba(vars.$pure-black, 0.10),
            0 4px 12px rgba(vars.$pure-black, 0.06);

        transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease, background-color 0.2s ease;

        &:hover {
            transform: translateY(-2px);
            border-color: rgba(vars.$accent-color, 0.55);
            box-shadow:
                0 20px 44px rgba(vars.$pure-black, 0.14),
                0 6px 16px rgba(vars.$pure-black, 0.08);
        }

        &:active {
            transform: translateY(0);
        }

        &:focus-visible {
            outline: 2px solid rgba(vars.$accent-color, 0.9);
            outline-offset: 3px;
        }
    }

    @media (max-width: vars.$bp-sm) {
        .my-account__logout-button {
            position: static;
            margin: 0 0 1rem auto;
        }
    }
}

.my-account {
    /*
        Local “design tokens” for this page.
        No new vars required.
    */
    --surface: rgba(255, 255, 255, 0.74);
    --surface-strong: rgba(255, 255, 255, 0.88);
    --border: rgba(26, 26, 26, 0.10);
    --border-strong: rgba(26, 26, 26, 0.14);
    --shadow: 0 18px 50px rgba(0, 0, 0, 0.10), 0 6px 18px rgba(0, 0, 0, 0.06);

    margin-top: clamp(1.5rem, 3vw, 2.25rem);
    color: vars.$soft-black;

    /* Prevent default link styling in nested blocks */
    a {
        color: inherit;
        text-decoration: none;
    }

    &__heading {
        font-size: clamp(1.55rem, 3.2vw, 2.1rem);
        line-height: 1.15;
        margin: 0 0 0.75rem;
        letter-spacing: -0.02em;

        strong {
            font-weight: 850;
        }
    }

    &__intro {
        margin-top: 2rem;
        margin-bottom: 1.25rem;
        border-radius: 1.25rem;
        border: 1px solid var(--border);
        background:
            radial-gradient(circle at 10% 10%, rgba(vars.$accent-color, 0.14), transparent 55%),
            linear-gradient(180deg, var(--surface-strong), var(--surface));
        box-shadow: var(--shadow);
        padding: clamp(1.1rem, 2.5vw, 1.6rem);
        position: relative;
        overflow: hidden;

        &::before {
            content: "";
            position: absolute;
            inset: -35%;
            pointer-events: none;
            background:
                radial-gradient(circle at 0 0, rgba(vars.$accent-color, 0.10), transparent 60%),
                radial-gradient(circle at 100% 30%, rgba(vars.$accent-color, 0.06), transparent 55%);
            opacity: 0.8;
        }
    }

    &__intro-header,
    &__intro-text {
        position: relative;
        z-index: 1;
    }

    &__intro-text {
        font-size: 0.98rem;
        line-height: 1.75;
        max-width: 52rem;
        color: rgba(vars.$soft-black, 0.82);

        p {
            margin: 0;
        }

        p + p {
            margin-top: 0.9rem;
        }
    }

    /* -------------------- SECTION WRAPPER -------------------- */
    &__section {
        margin-top: clamp(2.25rem, 4vw, 3rem);

        &--profile {
            margin-top: 2rem;
        }

        &--legal {
            margin-top: clamp(2.75rem, 4vw, 3.5rem);
            padding-top: 1.75rem;
            border-top: 1px solid rgba(vars.$soft-black, 0.08);
        }
    }

    &__section-header {
        margin-bottom: 1.25rem;

        h2 {
            margin: 0 0 0.4rem;
            font-size: clamp(1.15rem, 2vw, 1.45rem);
            letter-spacing: -0.01em;
        }

        p {
            margin: 0;
            font-size: 0.95rem;
            line-height: 1.75;
            max-width: 52rem;
            color: rgba(vars.$soft-black, 0.74);
        }
    }

    /* -------------------- PROFILE PANEL -------------------- */
    &__profile {
        max-width: 52rem;
        border-radius: 1.25rem;
        border: 1px solid var(--border);
        background:
            radial-gradient(circle at 12% 10%, rgba(vars.$accent-color, 0.12), transparent 55%),
            linear-gradient(180deg, var(--surface-strong), var(--surface));
        box-shadow: var(--shadow);

        padding: clamp(1.2rem, 2.5vw, 1.75rem);
        position: relative;
        overflow: hidden;
    }

    &__profile-banner {
        margin-bottom: 1.1rem;
        padding: 0.85rem 1rem;
        border-radius: 0.9rem;
        font-size: 0.92rem;
        line-height: 1.5;

        border: 1px solid rgba(vars.$accent-color, 0.35);
        background: rgba(vars.$accent-color, 0.10);
        color: rgba(vars.$soft-black, 0.85);

        box-shadow:
            0 12px 26px rgba(vars.$pure-black, 0.08),
            0 2px 10px rgba(vars.$pure-black, 0.05);
    }

    &__profile-grid {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        column-gap: clamp(1rem, 3vw, 2rem);
        row-gap: 1.25rem;
    }

    &__profile-field {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        font-size: 0.95rem;
        min-width: 0;
    }

    &__profile-label {
        font-size: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        font-weight: 850;
        color: rgba(vars.$soft-black, 0.70);
    }

    &__profile-input {
        padding: 0.8rem 1rem;
        border-radius: 999px;

        border: 1px solid rgba(vars.$soft-black, 0.14);
        background: rgba(#ffffff, 0.80);
        color: rgba(vars.$soft-black, 0.92);

        font-size: 0.95rem;
        line-height: 1.4;

        outline: none;
        appearance: none;

        box-shadow:
            inset 0 1px 0 rgba(#ffffff, 0.6),
            0 10px 22px rgba(vars.$pure-black, 0.06);

        transition: border-color 0.18s ease, box-shadow 0.18s ease, transform 0.12s ease, background-color 0.18s ease;

        &:hover:not(:disabled):not([readonly]) {
            border-color: rgba(vars.$soft-black, 0.22);
        }

        &:focus-visible {
            border-color: rgba(vars.$accent-color, 0.70);
            box-shadow:
                0 0 0 3px rgba(vars.$accent-color, 0.18),
                0 18px 40px rgba(vars.$pure-black, 0.10);
            background-color: rgba(#ffffff, 0.92);
            transform: translateY(-1px);
        }

        &[readonly] {
            cursor: default;
            background: rgba(#ffffff, 0.60);
            color: rgba(vars.$soft-black, 0.70);
        }
    }

    &__profile-actions {
        margin-top: 1.6rem;
        display: flex;
        justify-content: flex-start;
    }

    &__profile-save-button {
        display: inline-flex;
        align-items: center;
        justify-content: center;

        padding: 0.75rem 1.5rem;
        border-radius: 999px;
        border: 1px solid rgba(vars.$soft-black, 0.12);

        /*
            Accent gradient without needing new vars:
            mix() keeps it in-brand.
        */
        background-image: linear-gradient(
            135deg,
            vars.$accent-color 0%,
            mix(vars.$accent-color, #ffffff, 55%) 50%,
            vars.$accent-color 100%
        );
        background-size: 200% 100%;

        color: vars.$pure-black;
        font-size: 0.9rem;
        font-weight: 850;
        letter-spacing: 0.12em;
        text-transform: uppercase;

        cursor: pointer;

        box-shadow:
            0 14px 30px rgba(vars.$pure-black, 0.14),
            0 6px 14px rgba(vars.$pure-black, 0.08);

        transition: transform 0.16s ease, box-shadow 0.16s ease, background-position 0.35s ease, opacity 0.16s ease;

        &:hover:not(:disabled) {
            transform: translateY(-2px);
            background-position: 100% 0;
            box-shadow:
                0 20px 44px rgba(vars.$pure-black, 0.18),
                0 10px 20px rgba(vars.$pure-black, 0.10);
        }

        &:active:not(:disabled) {
            transform: translateY(0);
        }

        &:disabled {
            opacity: 0.65;
            cursor: not-allowed;
            box-shadow: none;
        }

        &:focus-visible {
            outline: 2px solid rgba(vars.$accent-color, 0.9);
            outline-offset: 3px;
        }
    }

    @media (max-width: vars.$bp-sm) {
        &__profile-grid {
            grid-template-columns: 1fr;
        }
    }

    /* -------------------- STATS -------------------- */
    &__stats {
        margin-top: 1.25rem;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 1.25rem;
    }

    &__stat-card {
        position: relative;
        display: flex;
        flex-direction: column;
        gap: 0.6rem;

        padding: 1.5rem 1.35rem;
        border-radius: 1.25rem;

        border: 1px solid var(--border);
        background:
            radial-gradient(circle at 12% 10%, rgba(vars.$accent-color, 0.12), transparent 55%),
            linear-gradient(180deg, var(--surface-strong), var(--surface));
        box-shadow: var(--shadow);

        overflow: hidden;
        cursor: default;

        transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;

        &::before {
            content: "";
            position: absolute;
            inset: -40%;
            opacity: 0;
            background: radial-gradient(circle at 0 0, rgba(vars.$accent-color, 0.18), transparent 55%);
            transition: opacity 0.2s ease;
            pointer-events: none;
        }

        &:hover {
            transform: translateY(-2px);
            border-color: rgba(vars.$accent-color, 0.35);
            box-shadow:
                0 26px 60px rgba(vars.$pure-black, 0.14),
                0 10px 24px rgba(vars.$pure-black, 0.07);

            &::before {
                opacity: 1;
            }
        }
    }

    &__stat-label {
        font-size: 0.78rem;
        text-transform: uppercase;
        letter-spacing: 0.14em;
        font-weight: 850;
        color: rgba(vars.$soft-black, 0.62);
    }

    &__stat-value {
        font-size: 1.35rem;
        font-weight: 900;
        letter-spacing: -0.02em;
        overflow-wrap: anywhere;
        color: rgba(vars.$soft-black, 0.92);
    }

    &__stat-note {
        font-size: 0.93rem;
        line-height: 1.7;
        color: rgba(vars.$soft-black, 0.76);
    }

    &__stat-link {
        margin-top: 0.35rem;
        width: fit-content;

        display: inline-flex;
        align-items: center;
        gap: 0.5rem;

        padding: 0.5rem 0.85rem;
        border-radius: 999px;

        border: 1px solid rgba(vars.$soft-black, 0.12);
        background: rgba(#ffffff, 0.70);
        color: rgba(vars.$soft-black, 0.90);

        font-size: 0.85rem;
        font-weight: 800;
        letter-spacing: 0.08em;

        box-shadow:
            0 12px 26px rgba(vars.$pure-black, 0.08),
            0 2px 10px rgba(vars.$pure-black, 0.05);

        transition: transform 0.18s ease, border-color 0.18s ease, box-shadow 0.18s ease;

        &:hover {
            transform: translateY(-1px);
            border-color: rgba(vars.$accent-color, 0.55);
            box-shadow:
                0 18px 40px rgba(vars.$pure-black, 0.12),
                0 6px 16px rgba(vars.$pure-black, 0.06);
        }

        &:focus-visible {
            outline: 2px solid rgba(vars.$accent-color, 0.9);
            outline-offset: 3px;
        }
    }

    /* -------------------- ORDERS (CAROUSEL) -------------------- */
    &__orders-carousel {
        display: flex;
        gap: 1.1rem;

        overflow-x: auto;
        padding-bottom: 0.5rem;

        scroll-snap-type: x mandatory;
        -webkit-overflow-scrolling: touch;

        /* Hide scrollbars but keep scrolling */
        scrollbar-width: none;

        &::-webkit-scrollbar {
            height: 0;
        }

        -webkit-mask-image: linear-gradient(to right, transparent 0%, #000 7%, #000 93%, transparent 100%);
        mask-image: linear-gradient(to right, transparent 0%, #000 7%, #000 93%, transparent 100%);
    }

    &__order-card {
        min-width: min(520px, calc(100% - 1.4rem));
        scroll-snap-align: start;
        margin: 0.25rem 0.7rem;
        padding: 1.5rem 1.35rem;
        border-radius: 1.25rem;
        border: 1px solid rgba(vars.$soft-black, 0.12);
        background:
            radial-gradient(circle at 12% 10%, rgba(vars.$accent-color, 0.10), transparent 55%),
            linear-gradient(180deg, var(--surface-strong), var(--surface));

        box-shadow:
            0 18px 44px rgba(vars.$pure-black, 0.12),
            0 6px 18px rgba(vars.$pure-black, 0.06);

        display: flex;
        flex-direction: column;
        gap: 0.7rem;

        transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;

        &:hover {
            transform: translateY(-2px);
            border-color: rgba(vars.$accent-color, 0.30);
            box-shadow:
                0 26px 60px rgba(vars.$pure-black, 0.14),
                0 10px 24px rgba(vars.$pure-black, 0.07);
        }
    }

    &__order-title {
        margin: 0;
        font-weight: 900;
        font-size: 1rem;
        letter-spacing: -0.01em;
    }

    &__order-text {
        margin: 0;
        font-size: 0.95rem;
        line-height: 1.75;
        color: rgba(vars.$soft-black, 0.76);
    }

    &__order-link {
        margin-top: 0.35rem;
        width: fit-content;

        display: inline-flex;
        align-items: center;

        color: rgba(vars.$soft-black, 0.90);
        font-weight: 850;
        letter-spacing: 0.08em;
        font-size: 0.86rem;

        @include mixins.underline-after(1px, -0.15rem, rgba(vars.$accent-color, 0.85), 0.2s);

        &:hover::after {
            width: 100%;
        }

        &:focus-visible {
            outline: 2px solid rgba(vars.$accent-color, 0.9);
            outline-offset: 3px;
            border-radius: 0.25rem;
        }
    }

    /* -------------------- GRIDS / CARDS -------------------- */
    &__grid {
        display: grid;
        gap: 1.15rem;

        &--quick-actions,
        &--help {
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        }
    }

    &__card,
    &__feature-card {
        padding: 1.45rem 1.35rem;
        border-radius: 1.25rem;

        border: 1px solid var(--border);
        background:
            radial-gradient(circle at 12% 10%, rgba(vars.$accent-color, 0.10), transparent 55%),
            linear-gradient(180deg, var(--surface-strong), var(--surface));
        box-shadow: var(--shadow);

        display: flex;
        flex-direction: column;
        gap: 0.65rem;

        font-size: 0.95rem;
        line-height: 1.75;

        transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;

        h3 {
            margin: 0 0 0.15rem;
            font-size: 1rem;
            font-weight: 900;
            letter-spacing: -0.01em;
        }

        p {
            margin: 0;
            color: rgba(vars.$soft-black, 0.76);
        }

        &:hover {
            transform: translateY(-3px);
            border-color: rgba(vars.$accent-color, 0.35);
            box-shadow:
                0 30px 70px rgba(vars.$pure-black, 0.14),
                0 12px 26px rgba(vars.$pure-black, 0.07);
        }
    }

    &__card--highlight {
        border-color: rgba(vars.$accent-color, 0.45);
        background:
            radial-gradient(circle at 0 0, rgba(vars.$accent-color, 0.18), transparent 60%),
            linear-gradient(180deg, var(--surface-strong), var(--surface));
    }

    &__card-link,
    &__feature-link {
        margin-top: 0.35rem;
        width: fit-content;

        color: rgba(vars.$soft-black, 0.90);
        font-weight: 850;
        letter-spacing: 0.08em;
        font-size: 0.86rem;

        @include mixins.underline-after(1px, -0.15rem, rgba(vars.$accent-color, 0.85), 0.2s);

        &:hover::after {
            width: 100%;
        }

        &:focus-visible {
            outline: 2px solid rgba(vars.$accent-color, 0.9);
            outline-offset: 3px;
            border-radius: 0.25rem;
        }
    }

    /* -------------------- TAGS -------------------- */
    &__tag,
    &__feature-tag {
        display: inline-flex;
        align-items: center;

        padding: 0.2rem 0.55rem;
        border-radius: 999px;

        font-size: 0.7rem;
        font-weight: 900;
        text-transform: uppercase;
        letter-spacing: 0.14em;

        background: rgba(vars.$accent-color, 0.16);
        border: 1px solid rgba(vars.$accent-color, 0.40);
        color: rgba(vars.$soft-black, 0.85);
        width: fit-content;
    }

    &__feature-grid {
        display: grid;
        gap: 1.15rem;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    }

    /* -------------------- INLINE LINKS LISTS -------------------- */
    &__inline-links {
        list-style: none;
        padding: 0;
        margin: 0.25rem 0 0;

        display: flex;
        flex-wrap: wrap;
        gap: 0.45rem 1rem;

        font-size: 0.9rem;
        color: rgba(vars.$soft-black, 0.80);

        li {
            display: inline-flex;
            align-items: center;
            gap: 0.45rem;

            &::before {
                content: "";
                width: 0.35rem;
                height: 0.35rem;
                border-radius: 999px;
                background: rgba(vars.$accent-color, 0.9);
                box-shadow: 0 0 0 3px rgba(vars.$accent-color, 0.16);
            }
        }

        a {
            color: rgba(vars.$soft-black, 0.90);
            font-weight: 800;

            @include mixins.underline-after(1px, -0.15rem, rgba(vars.$accent-color, 0.85), 0.2s);

            &:hover::after {
                width: 100%;
            }

            &:focus-visible {
                outline: 2px solid rgba(vars.$accent-color, 0.9);
                outline-offset: 3px;
                border-radius: 0.25rem;
            }
        }
    }

    /* -------------------- LEGAL LINKS -------------------- */
    &__legal-links {
        display: flex;
        flex-wrap: wrap;
        gap: 0.75rem;
        font-size: 0.86rem;
        align-items: center;

        color: rgba(vars.$soft-black, 0.72);

        span {
            color: rgba(vars.$soft-black, 0.40);
        }

        a {
            color: rgba(vars.$soft-black, 0.86);

            @include mixins.underline-after(1px, -0.15rem, rgba(vars.$accent-color, 0.85), 0.2s);

            &:hover {
                color: rgba(vars.$soft-black, 0.95);
            }

            &:hover::after {
                width: 100%;
            }

            &:focus-visible {
                outline: 2px solid rgba(vars.$accent-color, 0.9);
                outline-offset: 3px;
                border-radius: 0.25rem;
            }
        }
    }
}

.my-account-page {
    a.my-account__stat-link,
    a.my-account__order-link,
    a.my-account__card-link,
    a.my-account__feature-link {
        width: fit-content;
        text-decoration: none;
    }
}
