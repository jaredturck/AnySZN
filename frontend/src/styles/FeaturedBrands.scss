@use '_vars' as vars;
@use '_mixins' as mixins;

@keyframes featuredBrandsScroll {
    from {
        transform: translate3d(0, 0, 0);
    }

    to {
        transform: translate3d(-50%, 0, 0);
    }
}

.FeaturedBrands {
    padding: clamp(3rem, 5vw, 4.5rem) clamp(1.25rem, 4vw, 3rem);
    background: vars.$cream-white;
    color: vars.$soft-black;
    max-width: vars.$max-page-width;
    margin: 2rem auto;

    border-radius: 1.25rem;
    border: 1px solid rgba(vars.$soft-black, 0.08);
    box-shadow:
        0 12px 34px rgba(vars.$pure-black, 0.08),
        0 2px 10px rgba(vars.$pure-black, 0.05);

    position: relative;
    overflow: hidden;

    &__title {
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        margin-bottom: clamp(1.75rem, 3vw, 2.5rem);
        position: relative;
        z-index: 1;

        &-main {
            margin: 0;
            font-size: clamp(1.6rem, 3vw, 2.25rem);
            font-weight: 500;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            max-width: 30em;
            margin-inline: auto;
            line-height: 1.1;
        }
    }

    /*
        The viewport (clips overflow).
        Track inside is animated, so this can stay overflow:hidden.
    */
    &__logos {
        width: 100%;
        max-width: vars.$max-page-width;
        margin: 0 auto;

        padding: clamp(0.9rem, 2vw, 1.1rem);
        border-radius: 1rem;
        border: 1px solid rgba(vars.$soft-black, 0.08);
        background: rgba(#fff, 0.65);
        box-shadow:
            0 10px 26px rgba(vars.$pure-black, 0.06),
            0 2px 10px rgba(vars.$pure-black, 0.04);

        overflow: hidden;
        position: relative;
        z-index: 1;

        -webkit-mask-image: linear-gradient(
            to right,
            transparent 0%,
            #000 10%,
            #000 90%,
            transparent 100%
        );
        mask-image: linear-gradient(
            to right,
            transparent 0%,
            #000 10%,
            #000 90%,
            transparent 100%
        );

        /* Nice UX: hover pauses the marquee */
        &:hover .FeaturedBrands__track {
            animation-play-state: paused;
        }
    }

    /*
        This is the moving strip.
        Because JSX contains two identical sets of logos, translating -50% loops perfectly.
    */
    &__track {
        display: flex;
        flex-direction: row;
        align-items: center;
        flex-wrap: nowrap;

        gap: 0.5rem;

        width: max-content;
        will-change: transform;

        animation-name: featuredBrandsScroll;
        animation-duration: 28s; /* tweak: smaller = faster, larger = slower */
        animation-timing-function: linear;
        animation-iteration-count: infinite;
    }

    &__logo {
        display: inline-block;
        height: 2.25rem;
        width: auto;
        object-fit: contain;

        padding: 0.85rem 1rem;
        border-radius: 0.9rem;

        background: rgba(vars.$soft-black, 0.03);
        border: 1px solid rgba(vars.$soft-black, 0.08);

        filter: grayscale(100%);
        opacity: 0.78;

        flex: 0 0 auto;

        transition: transform 0.22s ease, box-shadow 0.22s ease, filter 0.22s ease, opacity 0.22s ease, border-color 0.22s ease, background-color 0.22s ease;

        &:hover {
            transform: translateY(-0.2rem);
            filter: grayscale(0%);
            opacity: 1;
            border-color: rgba(vars.$accent-color, 0.55);
            background: rgba(#fff, 0.85);
            box-shadow:
                0 16px 34px rgba(vars.$pure-black, 0.10),
                0 4px 14px rgba(vars.$pure-black, 0.06);
        }

        &:active {
            transform: translateY(-0.1rem);
            box-shadow:
                0 10px 26px rgba(vars.$pure-black, 0.08),
                0 2px 10px rgba(vars.$pure-black, 0.05);
        }

        &:focus-visible {
            outline: 2px solid rgba(vars.$accent-color, 0.9);
            outline-offset: 3px;
        }
    }
}
